(this.webpackJsonpant_design=this.webpackJsonpant_design||[]).push([[0],{199:function(e,t){},280:function(e,t,a){},281:function(e,t,a){},797:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(39),s=a.n(r),c=(a(280),a(18)),o=(a(281),a(158)),i=a(261),l=a(41),u=a(50),d=a(157),j=a(156),b=a(800),p=a(60),h=a(263),f=a(264),O=new(function(){function e(){Object(h.a)(this,e),this.authenticated=!1}return Object(f.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),m=a(22),x=a(19),g=a.n(x),y=a(28),v=a(204),w=a.n(v),P=a(32),C=a.n(P),I=10485760,k="http://localhost:3001",S="us-east-2",A="AKIA2SGQI5JKBX7R45YB",F="zjSpaIBRuQFF2XBjG3dFBxV+/eG4O6jqW4cR5pyx";w.a.config.update({region:S,accessKeyId:A,secretAccessKey:F});var D=function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post(k+"/s3-get-url",{key:t}).then((function(e){return 1===e.data.code?(console.log(e.data.message),""):e.data.url})).catch((function(e){return console.log(e),""}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(y.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(y.a)(g.a.mark((function e(r,s){var c,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in c=Object(m.a)(Object(m.a)({},t.fields),{},{"Content-Type":a[n].type,file:a[n].originFileObj}),o=new FormData,c)o.append(i,c[i]);C.a.post(t.url,o,{withCredentials:!1}).then((function(){r("S3 Upload OK!")})).catch((function(e){s(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),N=function(e,t){return new Promise(function(){var a=Object(y.a)(g.a.mark((function a(n,r){var s,c,o;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(o in s=Object(m.a)(Object(m.a)({},e.fields),{},{"Content-Type":t.type,file:t}),c=new FormData,s)c.append(o,s[o]);C.a.post(e.url,c,{withCredentials:!1}).then((function(){n("S3 Upload OK!")})).catch((function(e){console.log(e),r(e)}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},T=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){C.a.post(k+"/s3-delete-by-key",{key:t}).then((function(t){1===t.data.code?(console.log(t.data.message),a(t.data.message)):e()})).catch((function(e){console.log(e),a("Fail to delete object")}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e,t){return new Promise((function(a,n){C.a.post(k+"/s3-get-signed-post",{fileUid:e.uid,dir:t}).then((function(e){1===e.data.code?(console.log(e.data.message),n(e.data.message)):a(e.data.signed)})).catch((function(e){console.log(e),n("Fail to create pre-signed post")}))}))},U=function(e){return new Promise((function(t,a){C.a.post(k+"/s3-get-object-type",{key:e}).then((function(e){1===e.data.code?(console.log(e.data.message),a(e.data.message)):t(e.data.type)})).catch((function(e){console.log(e),a("Fail to get object type")}))}))},z=a(5),L=u.a.SubMenu,q=function(e){var t=e.isAuthenticated,a=void 0!==t&&t,r=e.user,s=e.currentRoute,o=e.routerProps,i=e.setUserInfo,l=Object(n.useState)(s),h=Object(c.a)(l,2),f=h[0],m=h[1],x=Object(n.useState)(!1),g=Object(c.a)(x,2),y=g[0],v=g[1],w=Object(n.useState)(""),P=Object(c.a)(w,2),C=P[0],I=P[1];Object(n.useEffect)((function(){m(s),v(!1)}),[s]),Object(n.useEffect)((function(){a&&""!==r.profilePictureKey&&D(r.profilePictureKey).then((function(e){I(e)}))}),[r]);var k=function(e){m(e.key)};return Object(z.jsxs)("div",{children:[a?Object(z.jsxs)(u.a,{onClick:k,selectedKeys:[f],mode:"horizontal",children:[Object(z.jsx)(u.a.Item,{style:{margin:"0px 5px 0px 10px",padding:"0px 20px",fontSize:"18px"},children:Object(z.jsx)(p.b,{to:"/",children:"UF CSABay"})},"home"),Object(z.jsx)(u.a.Item,{style:{margin:"0px 5px 0px 5px",padding:"0px 20px"},children:Object(z.jsx)(p.b,{to:"/create-post",children:"New Post"})},"create-post"),Object(z.jsxs)(L,{icon:""===r.profilePictureKey?Object(z.jsx)(d.a,{size:"default",style:{marginRight:"10px"},children:"".concat(r.firstName.substring(0,1)).concat(r.lastName.substring(0,1))}):Object(z.jsx)(d.a,{size:"default",src:C,style:{marginRight:"10px"}}),title:"".concat(r.firstName," ").concat(r.lastName),style:{float:"right",margin:"0px 10px 0px 0px",padding:"0px"},children:[Object(z.jsx)(u.a.Item,{children:Object(z.jsx)(p.b,{to:"/profile",children:"User Profile"})},"profile"),Object(z.jsx)(u.a.Item,{onClick:function(){v(!0)},children:"Logout"},"sign-out")]},"user-info")]}):Object(z.jsxs)(u.a,{onClick:k,selectedKeys:[f],mode:"horizontal",children:[Object(z.jsx)(u.a.Item,{style:{margin:"0px 5px 0px 10px",padding:"0px 20px",fontSize:"18px"},children:Object(z.jsx)(p.b,{to:"/",children:"UF CSABay"})},"home"),Object(z.jsxs)(L,{icon:Object(z.jsx)(d.a,{size:"default",icon:Object(z.jsx)(b.a,{}),style:{marginRight:"10px"}}),title:"Please Login",style:{float:"right",margin:"0px 10px 0px 0px",padding:"0px"},children:[Object(z.jsx)(u.a.Item,{children:Object(z.jsx)(p.b,{to:"/login",children:"Login"})},"login"),Object(z.jsx)(u.a.Item,{children:Object(z.jsx)(p.b,{to:"/forgot-password",children:"Forgot Password"})},"forgot-password"),Object(z.jsx)(u.a.Item,{children:Object(z.jsx)(p.b,{to:"/register",children:"Register"})},"register")]},"user-info")]}),Object(z.jsx)(j.a,{title:"Confirm Logout",visible:y,onOk:function(){O.logout((function(){v(!1),i(),document.cookie="userid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",o.history.push("/")}))},onCancel:function(){m(s),v(!1)},children:Object(z.jsx)("p",{children:"Are you sure to log out?"})})]})},R=a(259),B=a(117),V=a(97),W=a(70),_=a(45),M=a(274),Y=a(101),H={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},Z={wrapperCol:{xs:{span:24},sm:{span:24}}};var $=function(){var e=R.a.useForm(),t=Object(c.a)(e,1)[0],a=Object(n.useState)(""),r=Object(c.a)(a,2),s=r[0],i=r[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),j=d[0],b=d[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),f=(h[0],h[1]),O=Object(n.useState)(""),x=Object(c.a)(O,2),v=x[0],w=x[1],P=Object(n.useState)(""),I=Object(c.a)(P,2),k=I[0],S=I[1],A=Object(n.useState)(""),F=Object(c.a)(A,2),D=F[0],E=F[1],N=Object(n.useState)(""),T=Object(c.a)(N,2),K=T[0],U=T[1],L=Object(n.useState)(""),q=Object(c.a)(L,2),$=q[0],G=q[1],J=Object(n.useState)(""),X=Object(c.a)(J,2),Q=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],se=Object(n.useState)(30),ce=Object(c.a)(se,2),oe=ce[0],ie=ce[1],le=Object(n.useState)(null),ue=Object(c.a)(le,2),de=ue[0],je=ue[1],be=function(){var e=Object(y.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={firstName:s,lastName:j,email:v.toLowerCase(),emailVerification:k,wechatID:D.toLowerCase(),pwd:K,phoneNum:Q,profilePictureKey:""},C.a.post("http://localhost:3001/add-user",a).then((function(e){0===e.data.code?(o.b.success("Account created!"),i(""),b(""),f(""),w(""),S(""),E(""),U(""),G(""),ee(""),t.resetFields()):"string"===typeof e.data.message?o.b.error(e.data.message):(o.b.error("Something went wrong!"),console.log(e.data.message))}),(function(e){o.b.error("Something went wrong!"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){oe>=1?ie(oe-1):(ie(30),re(!1),je(null))}),de);return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Register"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:t},H),{},{name:"signup",onFinish:be,children:[Object(z.jsx)(R.a.Item,{name:"first-name",label:"First Name",rules:[{required:!0,message:"Please input your first name!"}],children:Object(z.jsx)(B.a,{value:s,onChange:function(e){return i(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"last-name",label:"Last Name",rules:[{required:!0,message:"Please input your last name!"}],children:Object(z.jsx)(B.a,{value:j,onChange:function(e){return b(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"email",label:"E-mail",rules:[{validator:function(e,t){return!t||/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.[a-zA-Z]{2,4}$/.test(t)?Promise.resolve():Promise.reject("Please enter a valid email address!")}},{required:!0,message:"Please input your E-mail!"}],children:Object(z.jsx)(B.a,{value:v,onChange:function(e){return w(e.target.value)}})}),Object(z.jsx)(R.a.Item,{label:"* Email Verification Code",children:Object(z.jsxs)(V.a,{gutter:6,children:[Object(z.jsx)(W.a,{span:20,children:Object(z.jsx)(R.a.Item,{name:"code",noStyle:!0,rules:[{required:!0,message:"Please input the email verification code you got!"}],children:Object(z.jsx)(B.a,{placeholder:"Enter your email verification code",value:k,onChange:function(e){return S(e.target.value)}})})}),Object(z.jsx)(W.a,{span:4,children:Object(z.jsx)(l.a,{disabled:!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.[a-zA-Z]{2,4}$/.test(t.getFieldValue("email"))||ne,onClick:function(){re(!0),je(1e3)},children:ne?"".concat(oe," s"):"Get Code"})})]})}),Object(z.jsx)(R.a.Item,{name:"wechat-id",label:"WeChat ID",children:Object(z.jsx)(B.a,{value:D,onChange:function(e){return E(e.target.value)}})}),Object(z.jsx)(R.a.Item,{label:Object(z.jsxs)("span",{children:["Password\xa0",Object(z.jsx)(_.a,{title:"Password should be at least 6 characters long. You should include numbers, upper-case letters, and lower-case letters in your password.",children:Object(z.jsx)(M.a,{})})]}),name:"password",rules:[{required:!0,message:"Please input your password!"},function(){return{validator:function(e,t){var a=/\d/.test(t),n=/[A-Z]/.test(t),r=/[a-z]/.test(t);return/ /.test(t)?Promise.reject("Password cannot contain space!"):t.length<6?Promise.reject("Password should be at least 6 characters long!"):a&&n&&r?Promise.resolve():Promise.reject("Please include numbers, upper-case letters, lower-case letters in your password!")}}}],hasFeedback:!0,children:Object(z.jsx)(Y.PasswordInput,{value:K,onChange:function(e){return U(e.target.value)},settings:{colorScheme:{levels:["#ff4033","#fe940d","#ffd908","#cbe11d","#6ecc3a"],noLevel:"lightgrey"},height:7,alwaysVisible:!0},inputProps:{size:"medium"}})}),Object(z.jsx)(R.a.Item,{name:"confirm",label:"Confirm Password",hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(){return{validator:function(e,t){return t&&K!==t?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(z.jsx)(B.a.Password,{value:$,onChange:function(e){return G(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"phone",label:"Phone Number",children:Object(z.jsx)(B.a,{value:Q,onChange:function(e){return ee(e.target.value)}})}),Object(z.jsx)(R.a.Item,Object(m.a)(Object(m.a)({},Z),{},{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))]})},G=a(57),J=a(262),X=a(255),Q=a(275),ee=a(189),te=a(801),ae=a(802),ne=J.a.Meta,re="300px",se={width:"250px",height:"40px",position:"relative",marginBottom:"10px"},ce={fontFamily:"Arial, Helvetica, sans-serif",position:"absolute",top:"50%",left:"100%",transform:"translate(-100%, -50%)",textAlign:"Right",fontSize:"10pt",float:"right"},oe={fontFamily:"Arial, Helvetica, sans-serif",position:"absolute",top:"50%",left:"0%",transform:"translate(0%, -50%)",textAlign:"Left",fontSize:"18pt",fontWeight:"700",float:"left"},ie=function(e){var t=e.posts,a=e.onClickStar,r=e.favoriteIDs,s=e.displayMyPost,o=e.onClickDelete,i=e.onClickEdit,l=e.onClickCard,u=e.routerProps,j=e.isAuth,b=Object(n.useState)([]),p=Object(c.a)(b,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){var e=!0;return function(){var a=Object(y.a)(g.a.mark((function a(){var n,r,s,c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=[],r=t.length,0===t.length&&f(n),s=g.a.mark((function a(s){var c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=t[s],!(t[s].pictureKeyArray.length>0)){a.next=6;break}return a.next=4,D(t[s].pictureKeyArray[0]).then((function(t){n=[].concat(Object(G.a)(n),[Object(m.a)(Object(m.a)({},c),{},{coverUrl:t})]),0===--r&&e&&f(n)}));case 4:a.next=9;break;case 6:n=[].concat(Object(G.a)(n),[Object(m.a)(Object(m.a)({},c),{},{coverUrl:""})]),0===--r&&e&&f(n);case 9:case"end":return a.stop()}}),a)})),a.t0=g.a.keys(t);case 5:if((a.t1=a.t0()).done){a.next=10;break}return c=a.t1.value,a.delegateYield(s(c),"t2",8);case 8:a.next=5;break;case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}}),[t]),Object(z.jsx)("div",{children:Object(z.jsx)(V.a,{children:h.map((function(e){return Object(z.jsx)(W.a,{style:{margin:"20px 15px"},children:Object(z.jsxs)(J.a,{hoverable:!0,bordered:!1,style:{width:re},actions:s?[Object(z.jsx)(Q.a,{onClick:function(t){t.stopPropagation(),i(e)}},"edit-post"),Object(z.jsx)(ee.a,{onClick:function(t){t.stopPropagation(),o(e._id)}},"delete-post")]:[r.includes(e._id)?Object(z.jsx)(te.a,{twoToneColor:"yellow",onClick:function(t){t.stopPropagation(),a(e._id)}},"favorite-post-yellow"):j?Object(z.jsx)(ae.a,{onClick:function(t){t.stopPropagation(),a(e._id)}},"favorite-post-gray"):Object(z.jsx)(X.a,{title:"You need to login to favorite a post. Do you want to login?",onConfirm:function(e){e.stopPropagation(),u.history.push("./login")},onCancel:function(e){e.stopPropagation()},okText:"Yes",cancelText:"No",children:Object(z.jsx)(ae.a,{onClick:function(e){e.stopPropagation()}},"favorite-post-gray")})],cover:Object(z.jsx)("div",{style:{overflow:"hidden",width:re,height:re,borderRadius:"10px"},children:Object(z.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"cover"},alt:"example",src:0===e.pictureKeyArray.length?"../no_image.jpg":e.coverUrl})}),onClick:function(t){return l(e,t)},children:[Object(z.jsxs)("div",{style:se,children:[Object(z.jsx)("div",{style:oe,children:"$".concat(e.price)}),Object(z.jsx)("div",{style:ce,children:"Gainesville, FL 32607"})]}),Object(z.jsx)("div",{style:{clear:"both"}}),Object(z.jsx)(ne,{style:{marginLeft:"0px"},avatar:Object(z.jsx)(d.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.title,description:0==Math.floor((Date.now()-Date.parse(e.modifiedTimestamp))/1e3/3600)?"".concat(Math.floor((Date.now()-Date.parse(e.modifiedTimestamp))/1e3/60)," minutes ago"):0==Math.floor((Date.now()-Date.parse(e.modifiedTimestamp))/1e3/3600/24)?"".concat(Math.floor((Date.now()-Date.parse(e.modifiedTimestamp))/1e3/3600)," hours ago"):"".concat(Math.floor((Date.now()-Date.parse(e.modifiedTimestamp))/1e3/3600/24)," days ago")})]})},e._id)}))})})},le=a(245),ue=a(258),de={width:"90%",height:"auto",marginLeft:"5%",borderWidth:"2px",borderStyle:"solid",borderColor:"#E0E0E0",marginBottom:"10px"},je={fontFamily:"Arial, Helvetica, sans-serif",fontWeight:600,fontSize:"15pt",textAlign:"center",marginBottom:"15px"},be={fontFamily:"Arial, Helvetica, sans-serif",color:"#A0A0A0",textAlign:"left",fontSize:"15pt",marginTop:"10px"},pe=function(e){var t=e.user,a=e.post,r=e.isInfoVisible,s=Object(n.useState)(""),o=Object(c.a)(s,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){""!==t.profilePictureKey&&D(t.profilePictureKey).then((function(e){l(e)}))}),[t]),Object(z.jsx)("div",{children:Object(z.jsxs)(J.a,{style:{width:"100%",marginTop:16},loading:!r,hoverable:!0,children:[Object(z.jsx)("div",{style:je,children:"Contact Information"}),""===t.profilePictureKey?Object(z.jsx)(d.a,{size:"default",src:"./default_profile_pic.jpg",style:de}):Object(z.jsx)(d.a,{size:"default",src:i,style:de}),Object(z.jsxs)("div",{style:be,children:["Name: ",t.firstName," ",t.lastName]}),Object(z.jsx)("div",{style:be,children:"Email: ".concat(""===a.email?"N/A":a.email)}),Object(z.jsx)("div",{style:be,children:"WeChat ID: ".concat(""===a.wechatID?"N/A":a.wechatID)}),Object(z.jsx)("div",{style:be,children:"Phone Number: ".concat(""===a.phoneNum?"N/A":a.phoneNum)})]})})},he={width:"100%",overflow:"hidden"},fe={fontSize:"20pt",fontWeight:"700",fontFamily:"Arial, Helvetica, sans-serif",float:"left"},Oe={float:"right"},me={fontSize:"30px",borderStyle:"solid",borderColor:"#A0A0A0",borderWidth:"2px",borderRadius:"10px",margin:"3px",padding:"3px"},xe={xs:{span:24},sm:{span:24},md:{span:24},lg:{span:8}},ge={xs:{span:24},sm:{span:24},md:{span:24},lg:{span:16}},ye={xs:{span:24},sm:{span:24},md:{span:24},lg:{span:8}},ve={xs:{span:24},sm:{span:24},md:{span:24},lg:{span:16}},we={fontFamily:"Arial, Helvetica, sans-serif",color:"black",textAlign:"left",fontSize:"15pt",marginTop:"10px"},Pe={fontFamily:"Arial, Helvetica, sans-serif",fontWeight:600,fontSize:"15pt",textAlign:"center",marginBottom:"15px"},Ce={span:24},Ie=function(e){var t=e.post,a=e.displayMyPost,r=e.isFavorite,s=e.onClickStar,o=e.user,i=e.onClickEdit,l=e.onClickDelete,u=e.routerProps,d=e.isAuth,j=Object(n.useState)([]),b=Object(c.a)(j,2),p=b[0],h=b[1];return Object(n.useEffect)(Object(y.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.pictureKeyArray.length){e.next=4;break}h([]),e.next=12;break;case 4:e.t0=g.a.keys(t.pictureKeyArray);case 5:if((e.t1=e.t0()).done){e.next=12;break}return a=e.t1.value,n=t.pictureKeyArray[a],e.next=10,D(n).then((function(e){h((function(t){return[].concat(Object(G.a)(t),[e])}))}));case 10:e.next=5;break;case 12:case"end":return e.stop()}}),e)}))),[t]),Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{style:he,children:[Object(z.jsx)("div",{style:fe,children:t.title}),Object(z.jsx)("div",{style:Oe,children:a?[Object(z.jsx)(Q.a,{style:me,onClick:function(){return i(t)}},"edit-post"),Object(z.jsx)(ee.a,{style:me,onClick:function(){return l(t._id)}},"delete-post")]:r?Object(z.jsx)(te.a,{style:me,twoToneColor:"yellow",onClick:function(){return s(t._id)}},"favorite-post-yellow"):d?Object(z.jsx)(ae.a,{style:me,onClick:function(){return s(t._id)}},"favorite-post-gray"):Object(z.jsx)(X.a,{title:"You need to login to favorite a post. Do you want to login?",onConfirm:function(){u.history.push("./login")},okText:"Yes",cancelText:"No",children:Object(z.jsx)(ae.a,{style:me},"favorite-post-gray")})}),Object(z.jsx)("div",{style:{clear:"both"}})]}),Object(z.jsx)(V.a,{children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},Ce),{},{children:Object(z.jsx)(le.a,{orientation:"left",style:{backgroundColor:"#E0E0E0",marginTop:"2px"}})}))}),Object(z.jsxs)(V.a,{gutter:"16",children:[Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},xe),{},{children:Object(z.jsx)(pe,{user:o,post:t,isInfoVisible:!0})})),Object(z.jsxs)(W.a,Object(m.a)(Object(m.a)({},ge),{},{children:[Object(z.jsx)("div",{style:Pe,children:"Pictures"}),Object(z.jsx)(ue.a.PreviewGroup,{children:0===p.length?Object(z.jsx)(ue.a,{width:"250px",height:"250px",style:{objectFit:"contain",padding:"10px"},src:"../no_image.jpg"}):p.map((function(e,t){return Object(z.jsx)(ue.a,{width:"250px",height:"250px",style:{objectFit:"contain",padding:"10px"},src:e},t)}))})]}))]}),Object(z.jsx)(V.a,{children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},Ce),{},{children:Object(z.jsx)(le.a,{orientation:"left",style:{backgroundColor:"#E0E0E0",marginTop:"2px"}})}))}),Object(z.jsxs)(V.a,{gutter:"16",children:[Object(z.jsxs)(W.a,Object(m.a)(Object(m.a)({},ve),{},{children:[Object(z.jsx)("div",{style:Pe,children:"Detailed Description"}),Object(z.jsx)("div",{style:we,children:t.description})]})),Object(z.jsxs)(W.a,Object(m.a)(Object(m.a)({},ye),{},{children:[Object(z.jsx)("div",{style:we,children:"Type of post: ".concat(t.typeOfPost)}),Object(z.jsx)("div",{style:we,children:"Location: ".concat(""===t.zipcode?"N/A":t.zipcode)}),Object(z.jsx)("div",{style:we,children:"Price: $ ".concat(""===t.price?"N/A":t.price)}),Object(z.jsx)("div",{style:we,children:"Post start date: 3/1/2021"}),Object(z.jsx)("div",{style:we,children:"Post end date: 4/1/2021"})]}))]})]})},ke="http://localhost:3001",Se=function(e){var t=e.isAuthenticated,a=void 0!==t&&t,r=e.user,s=e.setUser,i=e.routerProps,l=Object(n.useState)([]),u=Object(c.a)(l,2),d=u[0],b=u[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),f=h[0],O=h[1],x=Object(n.useState)(""),v=Object(c.a)(x,2),w=v[0],P=v[1],I=Object(n.useState)(""),k=Object(c.a)(I,2),S=k[0],A=k[1];Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(y.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C.a.get(ke+"/get-post-by-time?startIndex=0&numberOfPosts=20&order=new").then((function(t){console.log(t),1===t.data.code?(o.b.error(t.data.message),e&&b([])):e&&b(t.data.data)})).catch((function(t){console.log(t),e&&b([]),o.b.error("Something went wrong")}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[]);var F=function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={savedPosts:[].concat(Object(G.a)(r.savedPosts),[t])},C.a.put(ke+"/update-user-info",{newUser:a}).then((function(e){1===e.data.code?o.b.error("Fail to update saved posts: ".concat(e.data.message)):(s(Object(m.a)(Object(m.a)({},r),{},{savedPosts:e.data.data.savedPosts})),o.b.success("Post saved!"))})).catch((function(e){console.log(e),o.b.error("Fail to update saved posts.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=r.savedPosts).splice(r.savedPosts.indexOf(t),1),n={savedPosts:a},C.a.put(ke+"/update-user-info",{newUser:n}).then((function(e){1===e.data.code?o.b.error("Fail to update saved posts: ".concat(e.data.message)):(s(Object(m.a)(Object(m.a)({},r),{},{savedPosts:e.data.data.savedPosts})),o.b.success("Post unsaved!"))})).catch((function(e){console.log(e),o.b.error("Fail to update saved posts.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){r.savedPosts.includes(e)?D(e):F(e)},N=function(){var e=Object(y.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t),A(t.simplifiedUserInfo),O(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[0===d.length?"There is no post now. Create the first one!":Object(z.jsx)(ie,{posts:d,displayMyPost:!1,favoriteIDs:a?r.savedPosts:[],onClickStar:E,onClickCard:N,routerProps:i,isAuth:a}),Object(z.jsx)(j.a,{title:"Product Detail",visible:f,onCancel:function(){O(!1),P(""),P("")},footer:null,width:"70%",children:Object(z.jsx)(Ie,{post:w,displayMyPost:!1,isFavorite:!!a&&r.savedPosts.includes(w._id),onClickStar:E,user:S,routerProps:i})})]})},Ae=a(64),Fe=a(260),De=a(257),Ee=a(273);function Ne(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Te,Ke,Ue={fontFamily:"Arial, Helvetica, sans-serif",position:"absolute",top:"95%",left:"98%",transform:"translate(-100%, -100%)",textAlign:"Right",fontSize:"13pt"},ze={fontFamily:"Arial, Helvetica, sans-serif",position:"absolute",bottom:"5%",left:"2%",textAlign:"Left",fontSize:"13pt"},Le=Object(z.jsxs)("div",{children:[Object(z.jsx)(Ee.a,{}),Object(z.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),qe=function(e){var t=e.maxNumberOfPictures,a=e.pictureKeyArray,r=e.setPictureKeyArray,s=e.fileList,i=e.setFileList,l=Object(n.useState)(!1),u=Object(c.a)(l,2),d=u[0],b=u[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),f=h[0],O=h[1],m=Object(n.useState)(""),x=Object(c.a)(m,2),v=x[0],w=x[1],P=Object(n.useState)(a.length),C=Object(c.a)(P,2),k=C[0],S=C[1],A=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ne(t.originFileObj);case 3:t.preview=e.sent;case 4:b(!0),O(t.url||t.preview),w(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{style:{textAlign:"left"},children:[Object(z.jsx)(De.a,{listType:"picture-card",fileList:s,onPreview:A,onChange:function(e){var t=e.fileList,n=e.file;"image"!==n.type.substring(0,n.type.indexOf("/"))&&(o.b.error("You can only upload images"),setTimeout((function(){i(t.filter((function(e){return e.name!==n.name}))),S(t.length),r(a.filter((function(e){return e.substring(e.lastIndexOf("/")+1)!==n.uid})))}),1e3)),n.size>I&&(o.b.error("Single image cannot exceed 10MB"),setTimeout((function(){i(t.filter((function(e){return e.name!==n.name}))),S(t.length),r(a.filter((function(e){return e.substring(e.lastIndexOf("/")+1)!==n.uid})))}),1e3)),i(Object(G.a)(t)),S(t.length)},onRemove:function(e){console.log("removing: ",e.uid),console.log(a[0].substring(a[0].lastIndexOf("/")+1)),r(a.filter((function(t){return t.substring(t.lastIndexOf("/")+1)!==e.uid})))},beforeUpload:function(e){return r([].concat(Object(G.a)(a),["ProductDetailPhotos/".concat(e.uid)])),!1},children:s.length>=t?null:Le}),Object(z.jsx)("span",{style:ze,children:"(Each picture should be less than 10MB)"}),Object(z.jsx)("span",{style:Ue,children:"".concat(k,"/").concat(t)}),Object(z.jsx)(j.a,{visible:d,title:v,footer:null,onCancel:function(){return b(!1)},width:800,children:Object(z.jsx)("img",{alt:"example",style:{width:"100%"},src:f})})]})},Re=Ae.a.Option,Be={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},Ve={wrapperCol:{xs:{span:24},sm:{span:24}}},We={xs:{span:24},sm:{span:12}},_e=function(e){var t=e.user,a=R.a.useForm(),r=Object(c.a)(a,1)[0],s=Object(n.useState)(""),i=Object(c.a)(s,2),u=i[0],d=i[1],j=Object(n.useState)(""),b=Object(c.a)(j,2),p=b[0],h=b[1],f=Object(n.useState)(""),O=Object(c.a)(f,2),x=O[0],v=O[1],w=Object(n.useState)(""),P=Object(c.a)(w,2),I=P[0],k=P[1],S=Object(n.useState)(""),A=Object(c.a)(S,2),F=A[0],D=A[1],N=Object(n.useState)(0),T=Object(c.a)(N,2),U=T[0],L=T[1],q=Object(n.useState)([]),Y=Object(c.a)(q,2),H=Y[0],Z=Y[1],$=Object(n.useState)([]),J=Object(c.a)($,2),X=J[0],Q=J[1],ee=Object(n.useState)(t.email),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(t.wechatID),se=Object(c.a)(re,2),ce=se[0],oe=se[1],ie=Object(n.useState)(t.phoneNum),ue=Object(c.a)(ie,2),de=ue[0],je=ue[1],be=Object(n.useState)(0),pe=Object(c.a)(be,2),he=pe[0],fe=(pe[1],function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.b.loading({content:"Uploading Pictures",key:"updatable"}),e.next=3,new Promise(function(){var e=Object(y.a)(g.a.mark((function e(t,a){var n,r,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=X.length,r=0;case 2:if(!(r<X.length)){e.next=20;break}return s=X[r],e.prev=4,e.next=7,K(s,"ProductDetailPhotos");case 7:return c=e.sent,e.next=10,E(c,X,r);case 10:0===--n&&t(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),a();case 17:r++,e.next=2;break;case 20:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,a){return e.apply(this,arguments)}}()).then(Object(y.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={title:u,description:p,durationDays:x,typeOfPost:I,zipcode:F,price:U,pictureKeyArray:H,email:ae.toLowerCase(),wechatID:ce.toLowerCase(),phoneNum:de},C.a.post("http://localhost:3001/add-post",{newPost:a}).then((function(e){1===e.data.code?o.b.error({content:"Fail to create post: ".concat(e.data.message),key:"updatable",duration:2}):(d(""),h(""),v(""),k(""),D(""),L(""),Z([]),Q([]),ne(t.email),oe(t.wechatID),je(t.phoneNum),r.resetFields(),o.b.success({content:"Post Created!",key:"updatable",duration:2}))})).catch((function(e){console.log(e),o.b.error({content:"Fail to create post",key:"updatable",duration:2})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){o.b.error({content:"Fail to upload pictures",key:"updatable",duration:2})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Create Post"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:r},Be),{},{name:"createPost",onFinish:fe,initialValues:{email:t.email,"wechat-id":t.wechatID,phone:t.phoneNum,price:U},children:[Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},We),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["General Post Information\xa0",Object(z.jsx)(_.a,{title:"Enter the basic post informtion. These fields are required.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"title",label:"Post Title",rules:[{required:!0,message:"Please input the post title!"}],children:Object(z.jsx)(B.a,{value:u,onChange:function(e){return d(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"description",label:"Post Desceiption",rules:[{required:!0,message:"Please input the post descroption!"}],children:Object(z.jsx)(B.a.TextArea,{value:p,rows:4,onChange:function(e){return h(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"duration",label:Object(z.jsxs)("span",{children:["Post Duration (Days)\xa0",Object(z.jsx)(_.a,{title:"Enter how many days you expect your post to stay active. The maximum duration is 30 days. After these many days, your post will be automatically deleted. You can renew the duration after posting by editing and re-uploading your post if you need to post longer.",children:Object(z.jsx)(M.a,{})})]}),rules:[{type:"number",min:1,max:30,message:"Duration needs to be a number between 1 and 30!"},{required:!0,message:"Please input the duration of your post!"}],children:Object(z.jsx)(Fe.a,{placeholder:"Enter a number between 1 and 30, see question mark for more detail",value:x,onChange:function(e){return v(e)},style:{width:"100%"}})}),Object(z.jsx)(R.a.Item,{name:"type-of-post",label:"Type of Your Post",hasFeedback:!0,rules:[{required:!0,message:"Please select the post type!"}],children:Object(z.jsx)(V.a,{justify:"start",children:Object(z.jsx)(W.a,{children:Object(z.jsxs)(Ae.a,{style:{width:200},onChange:function(e){k(e),r.setFieldsValue({"type-of-post":e})},children:[Object(z.jsx)(Re,{value:"Selling",children:"Selling"}),Object(z.jsx)(Re,{value:"Buying",children:"Buying"}),Object(z.jsx)(Re,{value:"Subleasing",children:"Subleasing"}),Object(z.jsx)(Re,{value:"Other",children:"Other"})]})})})}),Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},We),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["Additional Post Information\xa0",Object(z.jsx)(_.a,{title:"Enter addition post information to give more details about your post.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"zipcode",label:Object(z.jsxs)("span",{children:["ZIP Code\xa0",Object(z.jsx)(_.a,{title:"Other users can use the ZIP Code to see the approximate location of the post.",children:Object(z.jsx)(M.a,{})})]}),rules:[function(){return{validator:function(e,t){return""===t||void 0===t||/^\d{5}(-\d{4})?$/.test(t)?Promise.resolve():Promise.reject("Please enter a valid US ZIP Code!")}}}],children:Object(z.jsx)(B.a,{value:F,onChange:function(e){return D(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"price",label:"Price",rules:[{type:"number",message:"Price needs to be a number!"}],children:Object(z.jsx)(Fe.a,{formatter:function(e){return 0==e?"$ 0":"$ ".concat(e)},style:{width:"100%"},value:U,onChange:function(e){L(null==e?0:e)},placeholder:"$ 0"})}),Object(z.jsx)(R.a.Item,{name:"pictures",label:Object(z.jsxs)("span",{children:["Pictures\xa0",Object(z.jsx)(_.a,{title:"The first picture will be used as the cover picture.",children:Object(z.jsx)(M.a,{})})]}),children:Object(z.jsx)("div",{style:{borderWidth:"1px",borderColor:"#E0E0E0",borderStyle:"solid",padding:"40px"},children:Object(z.jsx)(qe,{maxNumberOfPictures:"9",pictureKeyArray:H,setPictureKeyArray:Z,fileList:Object(G.a)(X),setFileList:Q},he)})}),Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},We),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["Contact Information\xa0",Object(z.jsx)(_.a,{title:"Enter your contact information here so that they are only visible to logged-in users. If you put your contact information in the description, it would be visible to everyone.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input a valid E-mail!"}],children:Object(z.jsx)(B.a,{value:ae,onChange:function(e){return ne(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"wechat-id",label:"WeChat ID",children:Object(z.jsx)(B.a,{value:ce,onChange:function(e){return oe(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"phone",label:"Phone Number",children:Object(z.jsx)(B.a,{value:de,onChange:function(e){return je(e.target.value)}})}),Object(z.jsx)(R.a.Item,Object(m.a)(Object(m.a)({},Ve),{},{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Create Post"})}))]}))]})},Me=a(254),Ye={labelCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:6}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12}}},He={wrapperCol:{md:{span:24},lg:{span:24}}},Ze=function(e){e.user,e.setUser;var t=R.a.useForm(),a=Object(c.a)(t,1)[0],r=Object(n.useState)(""),s=Object(c.a)(r,2),i=s[0],u=s[1],d=Object(n.useState)(""),j=Object(c.a)(d,2),b=j[0],p=j[1],h=Object(n.useState)(""),f=Object(c.a)(h,2),O=f[0],x=f[1],v=function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={pwd:b,oldPwd:i},C.a.put("http://localhost:3001/change-password",t).then((function(e){1===e.data.code?o.b.error(e.data.message):(u(""),p(""),x(""),o.b.success(e.data.message),a.resetFields())})).catch((function(e){o.b.error("Something went wrong!"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Change Password"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:a},Ye),{},{name:"change-password",onFinish:v,children:[Object(z.jsx)(R.a.Item,{name:"old-password",label:"Old Password",hasFeedback:!0,rules:[{required:!0,message:"Please enter your old password!"}],children:Object(z.jsx)(B.a.Password,{value:i,onChange:function(e){return u(e.target.value)}})}),Object(z.jsx)(R.a.Item,{label:Object(z.jsxs)("span",{children:["New Password\xa0",Object(z.jsx)(_.a,{title:"Password should be at least 6 characters long. You should include numbers, upper-case letters, and lower-case letters in your password.",children:Object(z.jsx)(M.a,{})})]}),name:"password",rules:[{required:!0,message:"Please input your new password!"},function(){return{validator:function(e,t){var a=/\d/.test(t),n=/[A-Z]/.test(t),r=/[a-z]/.test(t);return/ /.test(t)?Promise.reject("Password cannot contain space!"):t.length<6?Promise.reject("Password should be at least 6 characters long!"):a&&n&&r?Promise.resolve():Promise.reject("Please include numbers, upper-case letters, lower-case letters in your password!")}}}],hasFeedback:!0,children:Object(z.jsx)(Y.PasswordInput,{value:b,onChange:function(e){return p(e.target.value)},settings:{colorScheme:{levels:["#ff4033","#fe940d","#ffd908","#cbe11d","#6ecc3a"],noLevel:"lightgrey"},height:7,alwaysVisible:!0},inputProps:{size:"medium"}})}),Object(z.jsx)(R.a.Item,{name:"confirm",label:"Confirm New Password",hasFeedback:!0,rules:[{required:!0,message:"Please confirm your new password!"},function(){return{validator:function(e,t){return t&&b!==t?Promise.reject("The two new passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(z.jsx)(B.a.Password,{value:O,onChange:function(e){return x(e.target.value)}})}),Object(z.jsx)(R.a.Item,Object(m.a)(Object(m.a)({},He),{},{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})},$e=a(82),Ge={labelCol:(Te={sm:{span:24}},Object($e.a)(Te,"sm",{span:24}),Object($e.a)(Te,"md",{span:24}),Object($e.a)(Te,"lg",{span:6}),Te),wrapperCol:(Ke={sm:{span:24}},Object($e.a)(Ke,"sm",{span:24}),Object($e.a)(Ke,"md",{span:24}),Object($e.a)(Ke,"lg",{span:12}),Ke)},Je={wrapperCol:{md:{span:24},lg:{span:24}}},Xe=function(e){var t,a=e.user,r=e.setUser,s=R.a.useForm(),i=Object(c.a)(s,1)[0],u=Object(n.useState)(a.wechatID),d=Object(c.a)(u,2),j=d[0],b=d[1],p=Object(n.useState)(a.phoneNum),h=Object(c.a)(p,2),f=h[0],O=h[1],x=function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={wechatID:j,phoneNum:f},C.a.put("http://localhost:3001/update-user-info",{newUser:t}).then((function(e){if(1===e.data.code)o.b.error("Fail to update the contact info: ".concat(e.data.message));else{var n=e.data.data;n.wechatID===t.wechatID&&n.phoneNum===t.phoneNum?(r(Object(m.a)(Object(m.a)({},a),{},{wechatID:n.wechatID,phoneNum:n.phoneNum})),o.b.success("Successfully updated your contact info!")):o.b.error("Update failed, please try again or contach a CSA IT department member!")}})).catch((function(e){console.log(e),o.b.error("Fail to update the contact info.")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Edit Contact Information"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:i},Ge),{},{name:"change-contact-info",onFinish:x,initialValues:(t={},Object($e.a)(t,"wechat-id",a.wechatID),Object($e.a)(t,"phone",a.phoneNum),t),children:[Object(z.jsx)(R.a.Item,{name:"wechat-id",label:"WeChat ID",children:Object(z.jsx)(B.a,{value:j,onChange:function(e){return b(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"phone",label:"Phone Number",children:Object(z.jsx)(B.a,{value:f,onChange:function(e){return O(e.target.value)}})}),Object(z.jsx)(R.a.Item,Object(m.a)(Object(m.a)({},Je),{},{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})},Qe=Ae.a.Option,et={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},tt={xs:{span:24},sm:{span:20}},at=function(e){var t=e.post,a=e.isEditPostVisible,r=e.setIsEditPostVisible,s=Object(n.useState)([]),i=Object(c.a)(s,2),u=i[0],d=i[1];Object(n.useEffect)(Object(y.a)(g.a.mark((function e(){var a,n,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=t.pictureKeyArray.length,r=g.a.mark((function e(r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t.pictureKeyArray[r]).then((function(e){D(t.pictureKeyArray[r]).then((function(s){a=[].concat(Object(G.a)(a),[{uid:t.pictureKeyArray[r].substring(t.pictureKeyArray[r].lastIndexOf("/")+1),name:t.pictureKeyArray[r].substring(t.pictureKeyArray[r].lastIndexOf("/")+1),status:"done",url:s,type:e}]),0===--n&&(console.log("arr: ",a),d(a))}))})).catch((function(e){console.log(e),d(a)}));case 2:case"end":return e.stop()}}),e)})),e.t0=g.a.keys(t.pictureKeyArray);case 4:if((e.t1=e.t0()).done){e.next=9;break}return s=e.t1.value,e.delegateYield(r(s),"t2",7);case 7:e.next=4;break;case 9:case"end":return e.stop()}}),e)}))),[]);var b=R.a.useForm(),p=Object(c.a)(b,1)[0],h=Object(n.useState)(t.title),f=Object(c.a)(h,2),O=f[0],x=f[1],v=Object(n.useState)(t.description),w=Object(c.a)(v,2),P=w[0],I=w[1],k=Object(n.useState)(t.durationDays),S=Object(c.a)(k,2),A=S[0],F=S[1],N=Object(n.useState)(t.typeOfPost),T=Object(c.a)(N,2),L=T[0],q=T[1],Y=Object(n.useState)(t.zipcode),H=Object(c.a)(Y,2),Z=H[0],$=H[1],J=Object(n.useState)(t.price),X=Object(c.a)(J,2),Q=X[0],ee=X[1],te=Object(n.useState)(t.pictureKeyArray),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],se=t.pictureKeyArray,ce=Object(n.useState)(t.email),oe=Object(c.a)(ce,2),ie=oe[0],ue=oe[1],de=Object(n.useState)(t.wechatID),je=Object(c.a)(de,2),be=je[0],pe=je[1],he=Object(n.useState)(t.phoneNum),fe=Object(c.a)(he,2),Oe=fe[0],me=fe[1],xe=function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.b.loading({content:"Uploading Pictures",key:"updatable"}),e.next=3,new Promise(function(){var e=Object(y.a)(g.a.mark((function e(t,a){var n,r,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=u.length,r=0;case 3:if(!(r<u.length)){e.next=16;break}if(s=u[r],se.includes("ProductDetailPhotos/".concat(s.uid))){e.next=11;break}return e.next=8,K(s,"ProductDetailPhotos");case 8:return c=e.sent,e.next=11,E(c,u,r);case 11:0===--n&&t();case 13:r++,e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),a();case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a){return e.apply(this,arguments)}}()).then(Object(y.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(m.a)(Object(m.a)({},t),{},{title:O,description:P,durationDays:A,typeOfPost:L,zipcode:Z,price:Q,pictureKeyArray:ne,email:ie.toLowerCase(),wechatID:be.toLowerCase(),phoneNum:Oe}),C.a.put("http://localhost:3001/update-post",{updatedPost:a}).then((function(e){1===e.data.code?o.b.error({content:e.data.message,key:"updatable",duration:2}):o.b.success({content:"Post updated!",key:"updatable",duration:2})})).catch((function(e){console.log(e),o.b.error({content:"Fail to update post",key:"updatable",duration:2})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){o.b.error({content:"Fail to update pictures",key:"updatable",duration:2})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsx)("div",{children:Object(z.jsx)(j.a,{title:"Edit Post",visible:a,onCancel:function(){r(!1)},footer:null,width:"70%",children:Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:p},et),{},{name:"createPost",onFinish:xe,initialValues:{title:t.title,description:t.description,duration:t.durationDays,"type-of-post":t.typeOfPost,zipcode:t.zipcode,price:t.price,email:t.email,"wechat-id":t.wechatID,phone:t.phoneNum},children:[Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},tt),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["General Post Information\xa0",Object(z.jsx)(_.a,{title:"Enter the basic post informtion. These fields are required.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"title",label:"Post Title",rules:[{required:!0,message:"Please input the post title!"}],children:Object(z.jsx)(B.a,{value:O,onChange:function(e){return x(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"description",label:"Post Desceiption",rules:[{required:!0,message:"Please input the post descroption!"}],children:Object(z.jsx)(B.a.TextArea,{value:P,rows:4,onChange:function(e){return I(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"duration",label:Object(z.jsxs)("span",{children:["Post Duration (Days)\xa0",Object(z.jsx)(_.a,{title:"Enter how many days you expect your post to stay active. The maximum duration is 30 days. After these many days, your post will be automatically deleted. You can renew the duration after posting if you need to post longer.",children:Object(z.jsx)(M.a,{})})]}),rules:[{type:"number",min:1,max:30,message:"Duration needs to be a number between 1 and 30!"},{required:!0,message:"Please input the duration of your post!"}],children:Object(z.jsx)(Fe.a,{placeholder:"Enter a number between 1 and 30, see question mark for more detail",value:A,onChange:function(e){return F(e)},style:{width:"100%"}})}),Object(z.jsx)(R.a.Item,{name:"type-of-post",label:"Type of Your Post",hasFeedback:!0,rules:[{required:!0,message:"Please select the post type!"}],children:Object(z.jsx)(V.a,{justify:"start",children:Object(z.jsx)(W.a,{children:Object(z.jsxs)(Ae.a,{defaultValue:t.typeOfPost,style:{width:200},onChange:function(e){q(e),p.setFieldsValue({"type-of-post":e})},children:[Object(z.jsx)(Qe,{value:"Selling",children:"Selling"}),Object(z.jsx)(Qe,{value:"Buying",children:"Buying"}),Object(z.jsx)(Qe,{value:"Subleasing",children:"Subleasing"}),Object(z.jsx)(Qe,{value:"Other",children:"Other"})]})})})}),Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},tt),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["Additional Post Information\xa0",Object(z.jsx)(_.a,{title:"Enter addition post information to give more details about your post.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"zipcode",label:Object(z.jsxs)("span",{children:["ZIP Code\xa0",Object(z.jsx)(_.a,{title:"Other users can use the ZIP Code to see the approximate location of the post.",children:Object(z.jsx)(M.a,{})})]}),rules:[function(){return{validator:function(e,t){return""===t||void 0===t||/^\d{5}(-\d{4})?$/.test(t)?Promise.resolve():Promise.reject("Please enter a valid US ZIP Code!")}}}],children:Object(z.jsx)(B.a,{value:Z,onChange:function(e){return $(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"price",label:"Price",rules:[{type:"number",message:"Price needs to be a number!"}],children:Object(z.jsx)(Fe.a,{formatter:function(e){return 0==e?"$ 0":"$ ".concat(e)},style:{width:"100%"},value:Q,onChange:function(e){ee(null==e?0:e)}})}),Object(z.jsx)(R.a.Item,{name:"pictures",label:Object(z.jsxs)("span",{children:["Pictures\xa0",Object(z.jsx)(_.a,{title:"The first picture will be used as the cover picture.",children:Object(z.jsx)(M.a,{})})]}),children:Object(z.jsx)("div",{style:{borderWidth:"1px",borderColor:"#E0E0E0",borderStyle:"solid",padding:"40px"},children:Object(z.jsx)(qe,{maxNumberOfPictures:"9",pictureKeyArray:ne,setPictureKeyArray:re,fileList:u,setFileList:d})})}),Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},tt),{},{children:Object(z.jsxs)(le.a,{orientation:"left",children:["Contact Information\xa0",Object(z.jsx)(_.a,{title:"Enter your contact information here so that they are only visible to logged-in users. If you put your contact information in the description, it would be visible to everyone.",children:Object(z.jsx)(M.a,{})})]})}))}),Object(z.jsx)(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input a valid E-mail!"}],children:Object(z.jsx)(B.a,{value:ie,onChange:function(e){return ue(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"wechat-id",label:"WeChat ID",children:Object(z.jsx)(B.a,{value:be,onChange:function(e){return pe(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"phone",label:"Phone Number",children:Object(z.jsx)(B.a,{value:Oe,onChange:function(e){return me(e.target.value)}})}),Object(z.jsx)(V.a,{justify:"center",children:Object(z.jsx)(W.a,{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Update Post"})})})]}))})})},nt=a(271),rt="http://localhost:3001",st=Me.a.Sider,ct={width:"80%",margin:"auto"},ot={width:"20%",float:"left",padding:"10px",paddingTop:"40px"},it={width:"90%",height:"auto",borderWidth:"2px",borderStyle:"solid",borderColor:"#E0E0E0",marginBottom:"10px",cursor:"pointer"},lt={fontFamily:"Arial, Helvetica, sans-serif",color:"#A0A0A0",textAlign:"left"},ut={span:24},dt={width:"80%",float:"right",padding:"10px"},jt=function(e){var t=e.user,a=e.setUser,r=Object(n.useState)([]),s=Object(c.a)(r,2),i=s[0],l=s[1],b=Object(n.useState)([]),p=Object(c.a)(b,2),h=p[0],f=p[1],O=Object(n.useState)(1),x=Object(c.a)(O,2),v=x[0],w=x[1],P=Object(n.useState)("".concat(window.innerWidth>=992?"20%":"100%")),k=Object(c.a)(P,2),S=k[0],A=k[1],F=Object(n.useState)(""),E=Object(c.a)(F,2),U=E[0],L=E[1],q=Object(n.useState)(!1),R=Object(c.a)(q,2),B=R[0],M=R[1],Y=Object(n.useState)(!1),H=Object(c.a)(Y,2),Z=H[0],$=H[1],J=Object(n.useState)(!1),X=Object(c.a)(J,2),Q=X[0],ee=X[1],te=Object(n.useState)(""),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],se=Object(n.useState)(""),ce=Object(c.a)(se,2),oe=ce[0],ue=ce[1],de=Object(n.useState)(0),je=Object(c.a)(de,2),be=je[0],pe=je[1],he=Object(n.useState)(""),fe=Object(c.a)(he,2),Oe=fe[0],me=fe[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xe().then((function(e){l(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(y.a)(g.a.mark((function e(){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],console.log(t.savedPosts),n=0;case 3:if(!(n<t.savedPosts.length)){e.next=11;break}return e.next=6,ge(t.savedPosts[n]);case 6:"Post not found"===(r=e.sent)?we(t.savedPosts[n]):a.push(r);case 8:n++,e.next=3;break;case 11:f(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[Q]),Object(n.useEffect)((function(){""!==t.profilePictureKey&&D(t.profilePictureKey).then((function(e){me(e)}))}),[t]);var xe=function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(rt+"/get-post-by-user").then((function(e){return 1===e.data.code?(o.b.error(e.data.message),[]):e.data.data})).catch((function(e){return o.b.error("Fail to fetch user posts."),console.log(e),[]}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.a.get(rt+"/get-post-by-id?postID=".concat(t)).then((function(e){return 1===e.data.code?(o.b.error(e.data.message),"Post not found"==e.data.message?"Post not found":{}):e.data.data})).catch((function(e){return o.b.error("Fail to fetch the post."),console.log(e),{}})),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(Number(t.key));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(y.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={savedPosts:[].concat(Object(G.a)(t.savedPosts),[n])},C.a.put(rt+"/update-user-info",{newUser:r}).then((function(e){1===e.data.code?o.b.error("Fail to update saved posts: ".concat(e.data.message)):(a(Object(m.a)(Object(m.a)({},t),{},{savedPosts:e.data.data.savedPosts})),o.b.success("Post saved!"))})).catch((function(e){console.log(e),o.b.error("Fail to update saved posts.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(y.a)(g.a.mark((function e(n){var r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.savedPosts).splice(t.savedPosts.indexOf(n),1),s={savedPosts:r},C.a.put(rt+"/update-user-info",{newUser:s}).then((function(e){1===e.data.code?o.b.error("Fail to update saved posts: ".concat(e.data.message)):(a(Object(m.a)(Object(m.a)({},t),{},{savedPosts:e.data.data.savedPosts})),o.b.success("Post unsaved!"))})).catch((function(e){console.log(e),o.b.error("Fail to update saved posts.")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e){t.savedPosts.includes(e)?we(e):ve(e)},Ce=function(){var e=Object(y.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:a=e.sent,e.t0=g.a.keys(a.pictureKeyArray);case 4:if((e.t1=e.t0()).done){e.next=10;break}return n=e.t1.value,e.next=8,T(a.pictureKeyArray[n]);case 8:e.next=4;break;case 10:C.a.delete(rt+"/delete-single-post?postID=".concat(t)).then((function(e){1===e.data.code?o.b.err(e.data.message):l(i.filter((function(e){return e._id!==t})))})).catch((function(e){console.log(e),o.b.error("Fail to delete post")}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){Ce(U),M(!1),setTimeout((function(){$(!1)}),500)},Se=function(){M(!1)},Ae=function(e){L(e),M(!0)},Fe=function(e){pe(be+1),re(e),ee(!0),$(!1)},Ee=function(){var e=Object(y.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(t),console.log(t),ue(t.simplifiedUserInfo),$(!0);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(y.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.file,K(r,"ProfilePictures").then((function(e){N(e,r).then((function(){var e={profilePictureKey:"ProfilePictures/".concat(r.uid)};C.a.put(rt+"/update-user-info",{newUser:e}).then((function(e){if(1===e.data.code)o.b.error("Fail to update profile picture: ".concat(e.data.message));else{o.b.success("Profile picture updated!");var n=e.data.data;a(Object(m.a)(Object(m.a)({},t),{},{profilePictureKey:n.profilePictureKey}))}})).catch((function(e){console.log(e),o.b.error("Fail to update profile picture!")}))})).catch((function(e){o.b.error("Fail to update profile picture!")}))})).catch((function(e){o.b.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{id:"profile-container",style:ct,children:[Object(z.jsxs)(st,{style:ot,theme:"light",width:S,breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){A(e?"100%":"20%")},onCollapse:function(e,t){console.log(e,t)},children:[Object(z.jsx)(nt.a,{quality:1,modalTitle:"Crop Your Profile Picture",modalOK:"Confirm",children:Object(z.jsx)(De.a,{customRequest:Ne,beforeUpload:function(e){return"image"!==e.type.substring(0,e.type.indexOf("/"))?(o.b.error("You can only upload images"),!1):!(e.size>I)||(o.b.error("Single image cannot exceed 10MB"),!1)},fileList:[],children:Object(z.jsx)(_.a,{title:"Edit Profile Picture",placement:"top",children:""===t.profilePictureKey?Object(z.jsx)(d.a,{size:"default",src:"./default_profile_pic.jpg",style:it}):Object(z.jsx)(d.a,{size:"default",src:Oe,style:it})})})}),Object(z.jsxs)("div",{style:lt,children:["Name: ",t.firstName," ",t.lastName]}),Object(z.jsxs)("div",{style:lt,children:["Email: ",t.email.toLowerCase()]}),Object(z.jsxs)("div",{style:lt,children:["WeChat ID: ",""===t.wechatID?"N/A":t.wechatID]}),Object(z.jsxs)("div",{style:lt,children:["Phone Number: ",""===t.phoneNum?"N/A":t.phoneNum]}),Object(z.jsx)(V.a,{children:Object(z.jsx)(W.a,Object(m.a)(Object(m.a)({},ut),{},{children:Object(z.jsx)(le.a,{orientation:"left"})}))}),Object(z.jsxs)(u.a,{id:"profile-side-bar-menu",mode:"inline",defaultSelectedKeys:["".concat(1)],onSelect:function(e){return ye(e)},children:[Object(z.jsx)(u.a.Item,{children:"My Posts"},"1"),Object(z.jsx)(u.a.Item,{children:"Favorite Posts"},"2"),Object(z.jsx)(u.a.Item,{children:"Change Password"},"3"),Object(z.jsx)(u.a.Item,{children:"Edit Contact Info"},"4")]})]}),Object(z.jsx)("div",{id:"profile-main-body",style:dt,children:1==v?Object(z.jsx)(ie,{posts:i,displayMyPost:!0,onClickDelete:Ae,onClickEdit:Fe,onClickCard:Ee}):2==v?Object(z.jsx)(ie,{posts:h,displayMyPost:!1,favoriteIDs:t.savedPosts,onClickStar:Pe,onClickCard:Ee,isAuth:!0}):3==v?Object(z.jsx)(Ze,{user:t,setUser:a}):Object(z.jsx)(Xe,{user:t,setUser:a})}),Object(z.jsxs)(j.a,{title:"Product Detail",visible:Z,onCancel:function(){$(!1),re("")},footer:null,width:"70%",children:[Object(z.jsx)(Ie,{post:ne,displayMyPost:1===v,onClickStar:Pe,isFavorite:t.savedPosts.includes(ne._id),onClickDelete:Ae,onClickEdit:Fe,user:1==v?t:oe}),Object(z.jsx)(j.a,{title:"Delete Warning",visible:B&&Z,onOk:ke,onCancel:Se,children:Object(z.jsx)("p",{children:"Are you sure you want to delete this post?"})})]}),Object(z.jsx)(j.a,{title:"Delete Warning",visible:B&&!Z,onOk:ke,onCancel:Se,children:Object(z.jsx)("p",{children:"Are you sure you want to delete this post?"})}),void 0===ne.pictureKeyArray?"":Object(z.jsx)(at,{post:ne,isEditPostVisible:Q,setIsEditPostVisible:ee},be)]})},bt=a(48),pt={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},ht={wrapperCol:{xs:{span:24},sm:{span:24}}},ft=function(e){var t=e.routerProps,a=e.setUserInfo,r=R.a.useForm(),s=Object(c.a)(r,1)[0],i=Object(n.useState)(""),u=Object(c.a)(i,2),d=u[0],j=u[1],b=Object(n.useState)(""),h=Object(c.a)(b,2),f=h[0],x=h[1],v=function(){var e=Object(y.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={email:d.toLocaleLowerCase(),pwd:f},C.a.post("http://localhost:3001/user-login",n).then((function(e){1===e.data.code?o.b.error(e.data.message):(o.b.success("Login success!"),O.login((function(){a(e.data.data),t.history.push("/")})))})).catch((function(e){o.b.error("Something went wrong!"),console.log(e)})),j(""),x(""),s.resetFields();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Log In"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:s},pt),{},{name:"login",onFinish:v,children:[Object(z.jsx)(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input a valid E-mail"},{required:!0,message:"Please input your E-mail!"}],children:Object(z.jsx)(B.a,{value:d,onChange:function(e){return j(e.target.value)}})}),Object(z.jsx)(R.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(z.jsx)(B.a.Password,{value:f,onChange:function(e){return x(e.target.value)}})}),Object(z.jsxs)(R.a.Item,Object(m.a)(Object(m.a)({},ht),{},{children:[Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Log In"}),Object(z.jsx)(p.b,{to:"/forgot-password",children:"\xa0\xa0\xa0\xa0Forgot password?"})]}))]}))]})},Ot=a(272),mt=function(e){var t=e.isAuth,a=e.render,n=Object(Ot.a)(e,["isAuth","render"]);return Object(z.jsx)(bt.b,Object(m.a)(Object(m.a)({},n),{},{render:function(e){return t?Object(z.jsx)(a,Object(m.a)({},e)):Object(z.jsx)(bt.a,{to:{pathname:"/missing-permission",state:{from:e.location}}})}}))},xt={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},gt={wrapperCol:{xs:{span:24},sm:{span:24}}},yt=function(){var e=R.a.useForm(),t=Object(c.a)(e,1)[0],a=Object(n.useState)(""),r=Object(c.a)(a,2),s=r[0],i=r[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),j=d[0],b=d[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),f=h[0],O=h[1],x=Object(n.useState)(""),v=Object(c.a)(x,2),w=v[0],P=v[1],I=function(){var e=Object(y.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={email:s,emailVerification:j,pwd:f},C.a.put("http://localhost:3001/forgot-password",a).then((function(e){1===e.data.code?o.b.error(e.data.message):(i(""),b(""),O(""),P(""),o.b.success(e.data.message),t.resetFields())})).catch((function(e){o.b.error("Something went wrong!"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Forgot Password"}),Object(z.jsxs)(R.a,Object(m.a)(Object(m.a)({form:t},xt),{},{name:"change-password",onFinish:I,children:[Object(z.jsx)(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input a valid E-mail"},{required:!0,message:"Please input your E-mail!"}],children:Object(z.jsx)(B.a,{value:s,onChange:function(e){return i(e.target.value)}})}),Object(z.jsx)(R.a.Item,{label:"* Email Verification Code",children:Object(z.jsxs)(V.a,{gutter:6,children:[Object(z.jsx)(W.a,{span:20,children:Object(z.jsx)(R.a.Item,{name:"code",noStyle:!0,rules:[{required:!0,message:"Please input the email verification code you got!"}],children:Object(z.jsx)(B.a,{placeholder:"Enter your email verification code",value:j,onChange:function(e){return b(e.target.value)}})})}),Object(z.jsx)(W.a,{span:4,children:Object(z.jsx)(l.a,{children:"Get Code"})})]})}),Object(z.jsx)(R.a.Item,{label:Object(z.jsxs)("span",{children:["New Password\xa0",Object(z.jsx)(_.a,{title:"Password should be at least 6 characters long. You should include numbers, upper-case letters, and lower-case letters in your password.",children:Object(z.jsx)(M.a,{})})]}),name:"password",rules:[{required:!0,message:"Please input your new password!"},function(){return{validator:function(e,t){var a=/\d/.test(t),n=/[A-Z]/.test(t),r=/[a-z]/.test(t);return/ /.test(t)?Promise.reject("Password cannot contain space!"):t.length<6?Promise.reject("Password should be at least 6 characters long!"):a&&n&&r?Promise.resolve():Promise.reject("Please include numbers, upper-case letters, lower-case letters in your password!")}}}],hasFeedback:!0,children:Object(z.jsx)(Y.PasswordInput,{value:f,onChange:function(e){return O(e.target.value)},settings:{colorScheme:{levels:["#ff4033","#fe940d","#ffd908","#cbe11d","#6ecc3a"],noLevel:"lightgrey"},height:7,alwaysVisible:!0},inputProps:{size:"medium"}})}),Object(z.jsx)(R.a.Item,{name:"confirm",label:"Confirm New Password",hasFeedback:!0,rules:[{required:!0,message:"Please confirm your new password!"},function(){return{validator:function(e,t){return t&&f!==t?Promise.reject("The two new passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(z.jsx)(B.a.Password,{value:w,onChange:function(e){return P(e.target.value)}})}),Object(z.jsx)(R.a.Item,Object(m.a)(Object(m.a)({},gt),{},{children:Object(z.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})},vt=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(O.isAuthenticated()),u=Object(c.a)(s,2),d=u[0],j=u[1];return Object(n.useEffect)((function(){O.isAuthenticated()?j(!0):C.a.get("http://localhost:3001/get-user-info").then((function(e){1===e.data.code?j(!1):O.login((function(){j(!0),r(e.data.data)}))})).catch((function(e){o.b.error("Something went wrong!"),console.log(e),j(!1)}))}),[a]),Object(z.jsx)(p.a,{children:Object(z.jsx)("div",{className:"App",children:Object(z.jsxs)(bt.d,{children:[Object(z.jsx)(bt.b,{path:"/",exact:!0,render:d?function(e){return Object(z.jsxs)(z.Fragment,{children:[void 0===a?"":Object(z.jsx)(q,{isAuthenticated:!0,user:a,currentRoute:"home",routerProps:e,setUserInfo:r}),void 0===a?"":Object(z.jsx)(Se,{isAuthenticated:!0,user:a,setUser:r})]})}:function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(q,{isAuthenticated:!1,currentRoute:"home",routerProps:e,setUserInfo:r}),Object(z.jsx)(Se,{isAuthenticated:!1,setUser:r,routerProps:e})]})}}),Object(z.jsx)(bt.b,{path:"/login",exact:!0,render:function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(q,{isAuthenticated:!1,currentRoute:"login",routerProps:e,setUserInfo:r}),Object(z.jsx)(ft,{routerProps:e,setUserInfo:r})]})}}),Object(z.jsx)(bt.b,{path:"/forgot-password",exact:!0,render:function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(q,{isAuthenticated:!1,currentRoute:"forgot-password",routerProps:e,setUserInfo:r}),Object(z.jsx)(yt,{routerProps:e})]})}}),Object(z.jsx)(bt.b,{path:"/register",exact:!0,render:function(e){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(q,{isAuthenticated:!1,currentRoute:"register",routerProps:e,setUserInfo:r}),Object(z.jsx)($,{})]})}}),Object(z.jsx)(mt,{isAuth:j,path:"/create-post",exact:!0,render:function(e){return Object(z.jsxs)(z.Fragment,{children:[void 0===a?"":Object(z.jsx)(q,{isAuthenticated:!0,user:a,currentRoute:"create-post",routerProps:e,setUserInfo:r}),void 0===a?"":Object(z.jsx)(_e,{user:a})]})}}),Object(z.jsx)(mt,{isAuth:j,path:"/profile",exact:!0,render:function(e){return Object(z.jsxs)(z.Fragment,{children:[void 0===a?"":Object(z.jsx)(q,{isAuthenticated:!0,user:a,currentRoute:"profile",routerProps:e,setUserInfo:r}),void 0===a?"":Object(z.jsx)(jt,{user:a,setUser:r})]})}}),Object(z.jsx)(bt.b,{path:"/missing-permission",render:function(e){return Object(z.jsx)(i.a,{status:"403",title:"403",subTitle:"Sorry, you are need to login to see this page.",extra:[Object(z.jsx)(p.b,{to:"/",children:Object(z.jsx)(l.a,{type:"primary",children:"Back Home"},"to-home")},0),Object(z.jsx)(p.b,{to:"/login",children:Object(z.jsx)(l.a,{type:"primary",children:"Go to Login"},"to-login")},1)]})}}),Object(z.jsx)(bt.b,{path:"*",render:function(e){return Object(z.jsx)(i.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(z.jsx)(p.b,{to:"/",children:Object(z.jsx)(l.a,{type:"primary",children:"Back Home"})})})}})]})})})},wt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,803)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};C.a.defaults.withCredentials=!0,s.a.render(Object(z.jsx)("span",{children:Object(z.jsx)(vt,{})}),document.getElementById("root")),wt()}},[[797,1,2]]]);
//# sourceMappingURL=main.60900826.chunk.js.map